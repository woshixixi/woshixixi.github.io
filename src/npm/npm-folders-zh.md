# npm-folders

1.  æè¿°

    -   æœ¬åœ°å®‰è£…(é»˜è®¤):å°†æ–‡ä»¶æ”¾å…¥æœ¬åŒ…çš„æ ¹ç›®å½•ä¸‹çš„ node_modules ä¸‹
    -   å…¨å±€å®‰è£…( `-g`):å°†æ–‡ä»¶æ”¾åœ¨ `/usr/local`æˆ–è€…æ˜¯ node å®‰è£…çš„ç›®å½•ä¸‹
    -   å¦‚æœæƒ³ä½¿ç”¨ `require()` ç”¨æœ¬åœ°å®‰è£…ï¼Œå¦‚æœæƒ³åœ¨å‘½ä»¤è¡Œä¸­è¿è¡Œï¼Œä½¿ç”¨å…¨å±€å®‰è£…ã€‚å¦‚æœä¸¤ä¸ªéƒ½æƒ³ç”¨ï¼Œå¯ä»¥å®‰è£…ä¸¤æ¬¡ï¼Œæˆ–è€…ä½¿ç”¨`npm link`

2.  prefix è®¾ç½®

    prefix é»˜è®¤ä¸º node å®‰è£…çš„ç›®å½•ï¼Œåœ¨å¤šæ•°ç³»ç»Ÿä¸­ï¼Œä¸€èˆ¬æ˜¯ `/usr/local`ã€‚åœ¨ windows ç³»ç»Ÿä¸­æ˜¯`%AppData%npm`ï¼Œåœ¨ Unix ç³»ç»Ÿï¼Œé€šå¸¸ä¸ºä¸Šä¸€å±‚ï¼Œå› ä¸º node ä¸€èˆ¬å®‰è£…åœ¨`{prefix}/bin/node`åœ¨è€Œä¸æ˜¯`{prefix}/node.exe`ã€‚å¦‚æœä½¿ç”¨å…¨å±€å®‰è£…ï¼Œnpm å°±ä¼šæŠŠåŒ…å®‰è£…åœ¨è¿™ä¸ª prefix ç›®å½•ä¸‹ï¼Œè€Œæœ¬åœ°å®‰è£…æ˜¯è£…åœ¨å½“å‰ç›®å½•ä¸‹ã€‚

3.  `node modules`

    -   å…¨å±€å®‰è£…

        -   Unixï¼š `{prefix}/lib/node_modules`
        -   Windows: `{prefix}/node_modules`

    -   æœ¬åœ°å®‰è£… `require("packagename/lib/path/to/sub/module)`

4.  å¯æ‰§è¡Œæ–‡ä»¶

    -   å…¨å±€å®‰è£…

        -   Unixï¼š å¯æ‰§è¡Œæ–‡ä»¶é“¾æ¥æˆ–ç›´æ¥å®‰è£…åˆ°`{prefix}/bin`
        -   Windows: `{prefix}/`

    -   æœ¬åœ°å®‰è£… `./node_modules/.bin`

5.  æ›´å¤šä¿¡æ¯

    ä»`$PWD` ç›®å½•å¼€å§‹ï¼Œnpm ä¼šéå†æ–‡ä»¶æ ‘ï¼Œæ‰¾åˆ°ä¸€ä¸ªåŒ…å« package.json æˆ–è€…æ˜¯ node_modules çš„æ–‡ä»¶ã€‚å¦‚æœå‘ç°äº†è¿™ä¸ªæ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶å°†ä¼šè¢«æ ‡è¯†ä¸ºå¯è¿è¡Œå‘½ä»¤è¡Œçš„æœ‰æ•ˆçš„"å½“å‰ç›®å½•"

6.  å¾ªç¯ã€å†²çªå’Œ Folder Parsimony

    1. å½“ npm éå†æ–‡ä»¶å¯»æ‰¾ node_modules çš„æ—¶å€™ï¼Œä¼šå‘ç°ç¥–å…ˆèŠ‚ç‚¹å®‰è£…çš„åŒ…ã€‚å› æ­¤å¦‚æœä¸€ä¸ªåŒ…å·²ç»åœ¨ç¥–å…ˆçš„ node_modules é‡Œé¢å®‰è£…äº†ï¼Œè¯¥åŒ…å°±ä¸ä¼šè¢«å®‰è£…åœ¨å½“å‰çš„ç›®å½•ä¸­ã€‚

    -   ğŸŒ° foo -> bar -> baz å‡å¦‚ baz ä¾èµ– bar é‚£å°±ä¼šé™·å…¥æ­»å¾ªç¯ï¼Œå› æ­¤åœ¨å®‰è£…äº† `foo/node_modules/bar/node_modules/baz` ä¹‹åï¼Œå‘ç° bar å·²ç»å­˜åœ¨åœ¨ç¥–å…ˆçš„ node_modules ä¸­äº†ï¼Œå°±ä¸ä¼šå†æ”¾å…¥ `.../baz/node_modules` é‡Œäº†ã€‚

    2. ä¸Šé¢é‚£ç§æƒ…å†µä»…é€‚ç”¨äºç›¸åŒçš„ç‰ˆæœ¬ï¼Œå¦‚æœä¸¤ä¸ªåŒ…æ˜¯ä¸åŒçš„ç‰ˆæœ¬ã€‚

    3. å¯ä»¥é€šè¿‡åœ¨æœ€é«˜çº§å®‰è£…ä¸€äº›åŒ…è¿›è¡Œä¼˜åŒ–

7.  ä¾‹å­

```
foo
+-- blerg@1.2.5
+-- bar@1.2.3
|   +-- blerg@1.x(latest=1.3.7)
|   +-- baz@2.x
|   |   `-- quux@3.x
|   |       `-- bar@1.2.3(cycle)
|   `-- asdf@*
`-- baz@1.2.3
    `-- quux@3.x
        `-- bar
```

å®‰è£…ç›®å½•ï¼š

```
foo
+-- node_modules
    +-- blerg@1.2.5
    +-- bar@1.2.3
    |   `-- node_modules
    |       +-- baz@2.x
    |       |   `-- node_modules
    |       |       `-- quux@3.x
    |       `-- asdf@*
    |
    `-- baz@1.2.3
        `-- node_modules
            `-- quux@3.x
```
